(window.webpackJsonp=window.webpackJsonp||[]).push([["checkout~21833f8f"],{4562:function(t,e,o){"use strict";var s=o("ec46");o.n(s).a},4951:function(t,e,o){"use strict";var s=o("4bd7");o.n(s).a},"4bd7":function(t,e,o){},"5a29":function(t,e,o){"use strict";var s=o("7d07");o.n(s).a},"7cb4":function(t,e,o){"use strict";o.r(e);o("4de4"),o("7db0"),o("4160"),o("ac1f"),o("5319"),o("159b");var s=o("5530"),i=o("2909"),a=o("d178"),r=o("2f62"),n=o("c263"),c=o.n(n),l=o("946e"),d=o.n(l),u=o("b5ae"),m=o("1dce"),f=o("2d01"),p=o("cc11"),b=o("f121"),h={mounted:function(){var t=this;f.a.getTownship().then((function(e){var o;t.listTownship=t.listTownship.filter((function(t){return!1})),(o=t.listTownship).push.apply(o,Object(i.a)(e))})),this.isLogin&&"phone"==this.type&&(this.form.phoneNo=this.phoneNo)},mixins:[m.validationMixin],data:function(){return{deliveryCharge:0,form:{phoneNo:null,address:null,townshipId:0,date:null},address:"",preferedTime:"06:AM : 07:AM",listTownship:[],pickerOptions:{disabledDate:function(t){var e=Date.now(),o=new Date(e+6048e5);return t.getTime()<Date.now()||t.getTime()>o}},preferedTimeOptions:[{text:"06:AM - 07:AM",value:"06:AM : 07:AM"},{text:"04:PM - 05:PM",value:"04:PM : 05:PM"},{text:"Custom",value:"custom"}],customTime:"",orderFill:!1,imgUrl:b.a.defaults.baseURL}},i18n:{messages:{en:{itemName:"%{itemName}",unitName:"%{unitName}"},mm:{itemName:"%{itemNameMm}",unitName:"%{unitNameMm}"}}},validations:{form:{phoneNo:{required:u.required},address:{required:u.required},townshipId:{minValue:Object(u.minValue)(1)},date:{required:u.required}}},methods:{remove:function(t){this.$store.dispatch("cart/removeFromCart",t)},changeQty:function(t,e){(e.qty<1||isNaN(e.qty))&&(e.qty=1),this.$store.dispatch("cart/changeQty",{index:t,qty:e.qty})},incQty:function(t){this.$set(t,"qty",t.qty+1)},decQty:function(t){var e=t.qty;t.qty<2||(e-=1),this.$set(t,"qty",e)},order:function(){this.$refs.orderBtn.click()},onSubmit:function(){var t=this;if(this.$v.form.$touch(),!this.$v.form.$anyError){var e="";e="custom"==this.preferedTime?this.customTime:this.preferedTime;var o={listDto:this.shoppingCart,townshipId:this.form.townshipId,address:this.form.address,phoneNo:this.form.phoneNo,preferedTime:e,date:this.form.date};f.a.saveOrder(o).then((function(e){t.$bvModal.msgBoxOk("Order success.",{title:"OrderId is "+e,size:"sm",buttonSize:"sm",okVariant:"success",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0",centered:!0}).then((function(e){t.removeAllItem()})).catch((function(t){}))}))}},removeAllItem:function(){this.$store.dispatch("cart/removeAll"),this.$router.replace("home")},validateState:function(t){var e=this.$v.form[t],o=e.$dirty,s=e.$error;return o?!s:null},townshipChange:function(t){var e=this.listTownship.find((function(e){return e.townshipId==t}));this.deliveryCharge=e.deliveryCharge},checkout:function(){0!=this.form.townshipId?this.$refs.orderInfo.show():this.$v.form.$touch()}},computed:Object(s.a)({},Object(r.b)(["shoppingCart","userToken","isLogin","type","phoneNo","userName"]),{navItem:function(){return[{text:"Home",to:{name:"Home"}},{text:"Checkout",href:"/checkout",active:!0}]},amount:function(){var t=0;return this.shoppingCart.forEach((function(e){var o=e.price*e.qty;t+=o})),t},total:function(){return this.amount+this.deliveryCharge},styleDate:function(){return null==this.form.date?{display:"block",width:"100%","margin-top":"0.25rem","font-size":"80%",color:"#dc3545"}:{display:"none",width:"100%","margin-top":"0.25rem","font-size":"80%",color:"#dc3545"}}}),components:{navbar:a.a,"el-date-picker":c.a,"el-time-picker":d.a,"fb-login":p.a}},v=(o("5a29"),o("2877")),g=Object(v.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("navbar",{attrs:{showCart:!1}}),o("b-container",{staticClass:"mx-n2",attrs:{fluid:""}},[o("b-row",{staticStyle:{background:"#F9F9F9"}},[o("b-col",{staticClass:"d-none d-sm-block",attrs:{cols:"4"}},[o("b-breadcrumb",{attrs:{items:t.navItem}})],1)],1),o("b-row",[o("b-col",{attrs:{cols:"12",md:"4"}}),o("b-col",{attrs:{cols:"12",md:"8"}},[o("b-row",[o("b-col",[o("div",{staticClass:"checkout-title"},[t._v(t._s(t.$t("shoppingCart")))])])],1),o("b-row",[o("b-col",{attrs:{cols:"12",md:"6"}},t._l(t.shoppingCart,(function(e,s){return o("b-card",{key:s,staticClass:"shop-card-img shop-card mb-2",attrs:{"img-src":null==e.frontImg?t.imgUrl+"/items/no_image.jpg":t.imgUrl+"/items/"+e.frontImg,"img-alt":"Card image","img-left":""},scopedSlots:t._u([{key:"footer",fn:function(){return[o("div",[o("span",[t._v(" "+t._s(t.$t("unitName",{unitName:e.unitName,unitNameMm:e.unitNameMm}))+" ")]),o("div",{staticClass:"btn-num",on:{click:function(o){return t.incQty(e)}}},[o("b-icon",{attrs:{icon:"chevron-up"}})],1),o("center",[o("b-form-input",{staticClass:"input-qty",attrs:{type:"text"},on:{change:function(o){return t.changeQty(s,e)}},model:{value:e.qty,callback:function(o){t.$set(e,"qty",t._n(o))},expression:"item.qty"}})],1),o("div",{staticClass:"btn-num",on:{click:function(o){return t.decQty(e)}}},[o("b-icon",{attrs:{icon:"chevron-down"}})],1)],1)]},proxy:!0}],null,!0)},[o("b-card-text",{staticClass:"text-right"},[o("div",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(e){return t.remove(s)}}},[o("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),o("b-card-text",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("itemName",{itemName:e.itemName,itemNameMm:e.itemNameMm}))+" ")]),o("b-card-text",{staticClass:"text-left"},[t._v(" "+t._s(e.qty)+" x "),o("span",{staticClass:"item-price"},[t._v(" "+t._s(e.currency)+" "+t._s(e.price)+" ")])])],1)})),1),o("b-col",{attrs:{cols:"12",md:"6"}},[o("b-alert",{staticClass:"price-list",attrs:{variant:"dark",show:""}},[o("b-row",[o("b-col",{attrs:{cols:"8"}},[t._v(t._s(t.$t("itemTotal")))]),o("b-col",{staticClass:"price",attrs:{cols:"4"}},[t._v("MMK "+t._s(t.amount))])],1)],1),o("b-alert",{staticClass:"price-list",attrs:{variant:"dark",show:""}},[o("b-row",[o("b-col",{attrs:{cols:"7"}},[o("b-form-group",{attrs:{label:t.$t("township"),"label-for":"township"}},[o("b-form-select",{attrs:{id:"township",state:t.validateState("townshipId"),options:t.listTownship,"value-field":"townshipId","text-field":t.$t("townshipText"),placeholder:"Enter Township"},on:{change:t.townshipChange},scopedSlots:t._u([{key:"first",fn:function(){return[o("b-form-select-option",{attrs:{value:0,disabled:""}},[t._v(t._s(t.$t("selectTownship")))])]},proxy:!0}]),model:{value:t.$v.form.townshipId.$model,callback:function(e){t.$set(t.$v.form.townshipId,"$model",e)},expression:"$v.form.townshipId.$model"}})],1)],1),o("b-col",{staticClass:"price",attrs:{cols:"5"}},[o("span",{staticClass:"text-black-50"},[t._v(t._s(t.$t("deliveryCharge")))]),o("br"),t._v(" MMK "+t._s(t.deliveryCharge)+" ")])],1)],1),o("b-alert",{staticClass:"price-list",attrs:{variant:"dark",show:""}},[o("b-row",[o("b-col",{attrs:{cols:"8"}},[t._v(t._s(t.$t("total")))]),o("b-col",{staticClass:"price",attrs:{cols:"4"}},[t._v("MMK "+t._s(t.total))])],1)],1),o("b-row",[o("b-col",{staticClass:"mb-2",attrs:{cols:"12",md:"6"}},[""!=t.userToken?o("b-btn",{attrs:{block:"",variant:"primary"},on:{click:t.checkout}},[t._v(t._s(t.$t("orderNow")))]):o("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.orderinfo",modifiers:{orderinfo:!0}}],attrs:{block:"",variant:"danger"},on:{click:function(e){t.orderFill=!1}}},[t._v(t._s(t.$t("orderNow")))])],1),o("b-col",{staticClass:"mb-2",attrs:{cols:"12",md:"6"}},[o("b-btn",{attrs:{block:"",variant:"dark"},on:{click:function(e){return t.$router.go(-1)}}},[o("b-icon",{attrs:{icon:"chevron-left"}}),t._v(" "+t._s(t.$t("continueShop"))+" ")],1)],1)],1)],1)],1),o("b-row")],1)],1),o("b-modal",{ref:"orderInfo",attrs:{id:"orderinfo",centered:"",title:t.$t("orderDialogTitle")},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[""!=t.userToken||t.orderFill?o("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:t.order}},[t._v(t._s(t.$t("orderConfirm")))]):o("b-button",{staticClass:"d-none",attrs:{variant:"link"},on:{click:function(e){t.orderFill=!0}}})]},proxy:!0}])},[""!=t.userToken||t.orderFill?o("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.onSubmit(e)}}},[o("b-form-group",{attrs:{label:t.$t("phoneNo"),"label-for":"phoneNo"}},[o("b-form-input",{attrs:{id:"phoneNo",type:"tel",name:"phoneNo",placeholder:"Enter PhoneNo",state:t.validateState("phoneNo"),"aria-describedby":"input_phoneNo"},model:{value:t.$v.form.phoneNo.$model,callback:function(e){t.$set(t.$v.form.phoneNo,"$model",e)},expression:"$v.form.phoneNo.$model"}}),o("b-form-invalid-feedback",{attrs:{id:"input_phoneNo"}},[t._v("Require Phone No")])],1),o("b-form-group",{attrs:{label:t.$t("address"),"label-for":"address"}},[o("b-form-textarea",{attrs:{id:"address",placeholder:"Enter Address",state:t.validateState("address"),"aria-describedby":"input_address"},model:{value:t.$v.form.address.$model,callback:function(e){t.$set(t.$v.form.address,"$model",e)},expression:"$v.form.address.$model"}}),o("b-form-invalid-feedback",{attrs:{id:"input_address"}},[t._v("Require address")])],1),o("b-form-group",{attrs:{label:t.$t("chooseTime"),"label-for":"time"}},[o("b-form-radio-group",{attrs:{id:"time",options:t.preferedTimeOptions,buttons:"","button-variant":"outline-primary",size:"small"},model:{value:t.preferedTime,callback:function(e){t.preferedTime=e},expression:"preferedTime"}})],1),"custom"==t.preferedTime?o("el-time-picker",{attrs:{"arrow-control":"",format:"HH:mm:A","picker-options":{selectableRange:"06:00:00 - 18:00:00"},placeholder:"Select Time"},model:{value:t.customTime,callback:function(e){t.customTime=e},expression:"customTime"}}):t._e(),o("b-form-group",{attrs:{label:t.$t("date"),"label-for":"date"}},[o("el-date-picker",{attrs:{id:"date",type:"date",format:"dd-MMM-yyyy","value-format":"dd-MMM-yyyy",name:"orderDate",autocomplete:"off",pickerOptions:t.pickerOptions,placeholder:"Pick a day"},on:{change:function(e){return t.validateState("date")}},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t.$v.form.date.required?t._e():o("div",{style:t.styleDate,attrs:{id:"input_address"}},[t._v(t._s(t.$t("orderDateRequire")))]),o("b-button",{ref:"orderBtn",staticClass:"d-none",attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("orderConfirm")))])],1)],1):o("div",[o("fb-login")],1)],1),o("b-modal",{attrs:{id:"complete","ok-only":""}},[o("p",{staticClass:"my-4"},[t._v(t._s(t.$t("orderSuccess")))])])],1)],1)}),[],!1,null,"0585af64",null);e.default=g.exports},"7d07":function(t,e,o){},cc11:function(t,e,o){"use strict";var s=o("5530"),i=o("2d01"),a=o("2f62"),r=o("f121"),n={mounted:function(){window.fbAsyncInit=function(){FB.init({appId:"3254483804579476",cookie:!0,xfbml:!0,version:"v6.0"}),this.checkLoginState()}.bind(this)},data:function(){return{baseUrl:r.a.defaults.baseURL}},computed:Object(s.a)({},Object(a.b)(["userToken","isLogin","type"])),methods:{login:function(){FB.login(function(t){var e=this;if("unknown"==t.status);else if("connected"==t.status){var o=t.authResponse;i.a.login(o.accessToken).then((function(t){r.a.defaults.headers.common.Authorization=" Bearer ".concat(t.userToken),e.$store.dispatch("app/login",t)}))}else t.status}.bind(this),{scope:"public_profile,email"})},logout:function(){"phone"==this.type?this.$store.dispatch("app/logout",{}):(this.$store.dispatch("app/logout",{}),FB.logout(function(t){}.bind(this)))},checkLoginState:function(){FB.getLoginStatus(function(t){var e=this;if("connected"===t.status){t.authResponse.userID;var o=t.authResponse.accessToken;i.a.login(o).then((function(t){r.a.defaults.headers.common.Authorization=" Bearer ".concat(t.userToken),e.$store.dispatch("app/login",t.userToken)}))}else t.status}.bind(this),{scope:"public_profile,email"})},fbInfo:function(){FB.api("/me",(function(t){}))}}},c=(o("4951"),o("4562"),o("2877")),l=Object(c.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container-flud"},[o("div",{staticClass:"row justify-content-md-center"},[o("div",{staticClass:"col col-md-5"},[t.isLogin?o("h5",[t._v("Logout ထွက်မှာ သေချာပါသလား။")]):o("h5",{staticClass:"product-title",domProps:{innerHTML:t._s(t.$t("freshText"))}})])]),o("div",{staticClass:"row justify-content-md-center"},[o("div",{staticClass:"col col-md-5"},[o("img",{staticClass:"img-fluid",attrs:{src:t.baseUrl+"/img/fresh_bg.jpg",alt:"Fresh Myanmar"}})])]),t.isLogin?[o("div",{staticClass:"row justify-content-md-center"},[o("div",{staticClass:"col col-md-3 my-1"},[o("b-link",{staticClass:"btn btn-social btn-block btn-logout",on:{click:t.logout}},[o("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),t._v("Logout ")])],1)])]:[o("div",{staticClass:"row justify-content-md-center"},[o("div",{staticClass:"col col-md-3 my-1"},[t.isLogin?o("a",{staticClass:"btn btn-social btn-facebook btn-block",on:{click:t.logout}},[o("span",{staticClass:"fa fa-facebook"}),t._v(" Logout ")]):o("a",{staticClass:"btn btn-social btn-facebook btn-block",on:{click:t.login}},[o("span",{staticClass:"fa fa-facebook"}),t._v(" Sign in with Facebook ")])])]),o("div",{staticClass:"row justify-content-md-center"},[o("div",{staticClass:"col col-md-3 my-1"},[o("b-link",{staticClass:"btn btn-social btn-block btn-phone",attrs:{to:"/phoneLogin"}},[o("i",{staticClass:"fa fa-phone",attrs:{"aria-hidden":"true"}}),t._v("Sign in with Phone ")])],1)])]],2)}),[],!1,null,"692ab878",null);e.a=l.exports},ec46:function(t,e,o){}}]);